# FunPay Helper — GUI + Парс активных продаж и лотов + Автовыдача в одном JSON

Быстрый старт без python и зависимостей - [БЫСТРЫЙ СТАРТ](https://github.com/JoeGentov/FunpayHELPER/issues/1)

## Что внутри
- `funpay_helper.py` — основной GUI (PySide6). Монокром, закругления, анимация, вкладки:
  - **Настройки** — токен, приветствие, фильтр, почта/пароль, запуск слушателей.
  - **Консоль** — вывод логов.
  - **Оповещения** — Discord/Telegram.
  - **Магазин** — *НОВОЕ*: парс активных **продаж** и **лотов**, просмотр таблицей, экспорт в `autodelivery_items.json`.
- `store_fetcher.py` — работа с FunPayAPI: получение активных продаж и активных лотов.
- `styles.qss` — чуть более аккуратные стили (по‑прежнему ч/б).
- `requirements.txt` — зависимости.
- `autodelivery_items.json` — общий файл для автовыдачи (создаётся/перезаписывается из вкладки «Магазин»).
  
## Запуск
```bash
pip install -r requirements.txt
python funpay_helper.py
```
> Если у вас уже установлен `FunPayAPI`, разрешается просто: `pip install PySide6 requests`

## Где хранится что
- Токен/сообщения/логины — всё как раньше: `goldenkey.txt`, `message.txt`, `accountname.txt`, `account1mail.txt`, `account1pass.txt` и т.д.
- Оповещения — `discord_webhook.txt`, `telegram_token.txt`, `telegram_chat_id.txt`.
- Экспорт для автовыдачи — `autodelivery_items.json` (в корне проекта).

## Как это работает
- **Активные продажи**: пытаемся получить список `OrderShortcut` (открытые/активные заказы). Если API вашей версии не выдаёт список — покажем счётчик и подсказку в консоли.
- **Активные лоты**: получаем профиль продавца и `get_lots()` → таблица с ID, названием, ценой, остатком и др.
- **Экспорт в JSON**: все лоты попадают в `autodelivery_items.json` в виде массива объектов. Поле `delivery_text` можно заполнить в таблице и сохранить.

## Схема `autodelivery_items.json`
```json
[
  {
    "lot_id": 123456,
    "title": "Мой товар",
    "price": 59.0,
    "stock": 10,
    "subcategory": "Roblox > Robux",
    "delivery_text": "Почта: ...\nПароль: ..."
  }
]
```
> Ваш текущий воркер «Автовыдача» может читать этот файл и подставлять `delivery_text` в сообщение покупателю (см. пометки в `funpay_helper.py`, метод `_send_autodelivery_for_order`).

## Важно
API FunPayAPI часто обновляют. Я добавил несколько «веток совместимости» и подробные сообщения в консоль — если в вашей версии что‑то называется иначе, вы увидите понятную подсказку, что именно поправить.
